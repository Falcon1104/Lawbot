<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot</title>
    <link rel="stylesheet" href="styling.css">
</head>
<body  >

    <div class="header">

        <img src="https://static.vecteezy.com/system/resources/thumbnails/000/585/313/small/07-03.jpg" alt="logo">
        <h1 style="margin-left: 590px;">Chat-Bot</h1>

        <ul>

            <li style="margin-right: 10px;"><a href="user's-main.html">HOME</a></li>
            <li style="margin-right: 20px;"><a href="user's-profile.html">PROFILE</a></li>

            </ul>
        </div>


        <div class="display" >

        <div class="userInputText">

            <p>  This text is supposed to be entered by user </p>
            



        </div>


        <div class="botReply">


            <p>This reply is generated by bot</p>


            </div>



        </div>


        <div class="userInputText" style="margin-top:300px;margin-left:300px;">

            <p>  This text is supposed to be entered by user </p>
            



        </div>

        

        <div class="main">

        <div class="inputBox">
           <center>
            <input type="text" name="query" id="query" >
            <input type="button" value="&#x2191" style="width: 50px;height: 50px;border-radius: 15px;" onclick="sendPromptToOpenAI()">
           </center>

            </div>

            <script type="text/javascript">
                 
                 async function sendPromptToOpenAI() {
                        alert("Function invoked");

                        var query = document.getElementById("query").value;

                        try {
                            const response = await fetch('https://api.openai.com/v1/completions', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': 'Bearer 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'
                                },
                                body: JSON.stringify({
                                    model: 'davinci-codex',
                                    prompt: query,
                                    max_tokens: 100
                                })
                            });

                            if (!response.ok) {
                                throw new Error('Network response was not ok.');
                            }

                            const data = await response.json();
                            console.log('API Response:', data); // Log the entire API response for debugging
                            const reply = data.choices[0].text.trim();

                            alert("The reply from bot: " + reply); // Display the AI's response
                        } catch (error) {
                            console.error('Error:', error);
                            alert('An error occurred. Please try again.'); // Handle error case
                        }
                    }


                </script>
    
        </div>

        <footer>

            <p>&copy; 2024 LawBot. All rights reserved.</p>

            </footer>
</body>
</html>